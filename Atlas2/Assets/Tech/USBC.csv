TestName,TestActions,Disable,Input,Output,Timeout,Retries,AdditionalParameters,ExitEarly,SetPoison,Commands,FA,Condition,Notes
FWDL_ACEFlash_SPI_VBAT4V2_VBUS5V,Common:relaySwitch,,,,,,"{""subsubtestname"":""ACE_HReset_H"",""netname"":""ace_hrest"",""state"":""connect""}",,,,,,
,Common:relaySwitch,,,,,,"{""subsubtestname"":""ACE_SPI_To_Xavier"",""netname"":""ace_spi_to_zynq"",""state"":""connect""}",,,,,,
,Common:delay,,,,,,"{""subsubtestname"":""DELAY_100MS"",""delay"":""100""}",,,,,,
,Tech:eraseFW,,,,,,"{""subsubtestname"":""ACE_Erase"",""attribute"":""ACEFlash_CHIP_ID_DFU""}",Y,,,,,
,Common:delay,,,,,,"{""subsubtestname"":""DELAY_500MS"",""delay"":""500""}",,,,,,
,Tech:programFW,,,,,,"{""subsubtestname"":""ACE_FWDL""}",Y,,,,,
,Tech:checkUUTACEFW,,,,,,"{""subsubtestname"":""Check_ACE_FW_UUT""}",Y,,,,,
,Common:relaySwitch,,,,,,"{""subsubtestname"":""ACE_SPI_Disconnect"",""netname"":""ace_spi_to_zynq"",""state"":""disconnect""}",,,,,,
,Common:relaySwitch,,,,,,"{""subsubtestname"":""ACE_HReset_L"",""netname"":""ace_hrest"",""state"":""disconnect""}",,,,,,
OTPProgram_ACE,Common:sendCmdAndCreateRecord,,,,,,"{""subsubtestname"": ""FW_Version"",""pattern"": ""0000000:\\s+(\\w+\\s+\\w+\\s+\\w+\\s+\\w+)"",""attribute"": ""ACE_FW_VER_DFU"",""expect"": ""00 16 21 00"",""raiseErrorWhenFailed"":""YES""}",Y,,ace --pick usbc;ace --read 0x0f,,,
,Common:sendCmdAndCreateRecord,,,,,,"{""subsubtestname"": ""GPIO_ACE_TO_SOC_IRQ_L_Low"",""pattern"": ""GPIO\\[\\d+,\\d+\\]\\s+=\\s+(\\d+)"",""isparametric"": ""YES""}",,,socgpio --port 0 --pin 171 --get,,,
,Tech:getProductionMode,,,{production_mode},,,"{""subsubtestname"": ""Get_Production_mode"",""pattern"": ""production%-mode%:%s*(%d)""}",Y,,soc -p,,,
,Common:relaySwitch,,,,,,"{""subsubtestname"":""Set_PDVBUS_0V"",""netname"":""pdvbus"",""state"":""off""}",,,,,,
,Common:relaySwitch,,,,,,"{""subsubtestname"":""Set_PPVBUS_0V"",""netname"":""ppvbus14v"",""state"":""off""}",,,,,,
,Tech:setOTPPower,,,,,,"{""subsubtestname"": ""Power_Set""}",,,,,,
,Common:sendCmdAndCreateRecord,,,,,,"{""subsubtestname"": ""PotomacRead_PPVBUS_PROT"",""pattern"": ""potomac:\\s+vbus:\\s+(-?[0-9.]+)\\s*mV"",""isparametric"": ""YES""}",,,pmuadc --sel potomac --read vbus,,,
,Tech:verifyOperatingMode,,,{otp_check_crc_flag},,,"{""subsubtestname"": ""Check_ACE2_Operating_STATE"",""pattern"": ""0000000%:%s*(%w+%s*%w+%s*%w+%s*%w+)"",""record"":""YES""}",,,ace -r 0x03,,,
,Tech:checkOTPCRC,,,{otp_program_words_flag},,,"{""subsubtestname"": ""Check_CRC"",""record"":""YES""}",Y,,,FA_POWER_OFF,otp_check_crc_flag==Verify_Ace2_operating_state,
,Tech:getOTPProgramCustomerWords,,,,,,"{""subsubtestname"": ""CUSTOMER_WORDS"",""record"":""YES""}",Y,,,,otp_program_words_flag==OTP_NEED_PROGRAM_CUSTOMER_WORDS,
,Tech:getOTPProgramFlag,,,{otp_program_flag},,,"{""subsubtestname"": ""Get_otp_program_flag"",""record"":""YES""}",Y,,,,,
,Tech:getCustomerDataSize,,,{otp_customer_Data_size},,,"{""subsubtestname"": ""Application_Customization_Data_Size"",""record"":""YES""}",Y,,,,otp_program_flag==OTP_Need_Check_Key_Data_Size,
,Tech:getCustomerDataSize,,,{otp_customer_Data_size},,,"{""subsubtestname"": ""Application_Customization_Data_Size_prod_fuse"",""record"":""YES""}",Y,,,,otp_program_flag==OTP_Need_Check_Key_Data_Size_prod_fuse,
,Tech:getKeySize,,,{otp_program_keydata_Size},,,"{""subsubtestname"": ""Key_Data_Size"",""record"":""YES""}",Y,,,,otp_customer_Data_size==PASS_0,
,Tech:writeOTP,,,{otp_key_Data_flag},,,"{""subsubtestname"": ""KEY_DATA_FLAG"",""param1"": ""otp_key_Data_flag"",""record"":""YES""}",Y,,,,otp_program_keydata_Size==OTP_Key_SIZE_NOT_0,
,Tech:writeOTP,,,{otp_key_Data_value},,,"{""subsubtestname"": ""KEY_DATA_VALUE"",""param1"": ""otp_key_Data_value"",""record"":""YES""}",Y,,,,otp_key_Data_flag==TRUE,
,Tech:writeOTP,,,,,,"{""subsubtestname"": ""KEY_DATA_CRC"",""param1"": ""key_Data_crc"",""record"":""YES""}",,,,,otp_key_Data_value==TRUE,
,Tech:readAndCheckOTP,,,,,,"{""subsubtestname"": ""Verify_FINAL_CRC"",""pattern"": ""RxData%s*%(4.%).-%:.-0x0000%s*%:%s*(0x%w+%s+0x%w+%s+0x%w+%s+0x%w+)""}",Y,,"ace --4cc OTPr --txdata ""0x80"" --rxdata 4",FA_POWER_OFF,otp_program_flag==OTP_Need_Check_Key_Data_Size,
,Tech:readAndCheckOTP,,,,,,"{""subsubtestname"": ""Verify_FINAL_CRC_prod_fuse"",""pattern"": ""RxData%s*%(4.%).-%:.-0x0000%s*%:%s*(0x%w+%s+0x%w+%s+0x%w+%s+0x%w+)""}",Y,,"ace --4cc OTPr --txdata ""0x80"" --rxdata 4",FA_POWER_OFF,otp_program_flag==OTP_Need_Check_Key_Data_Size_prod_fuse,
,Tech:setOTPPowerBack,,,,,,"{""subsubtestname"": ""Power_Set_Back"",""record"":""YES""}",,,,,,
,Common:delay,,,,,,"{""subsubtestname"":""DELAY_500MS_1"",""delay"":""500"",""record"":""YES""}",,,,,,
,Common:relaySwitch,,,,,,"{""subsubtestname"":""Set_PDVBUS_5V"",""netname"":""pdvbus"",""state"":""on""}",,,,,,
,Common:readVoltage,,,,,,"{""subsubtestname"":""PPVBUS_PROT_TO_5V"",""netname"":""PPVBUS""}",,,,,,
,Common:relaySwitch,,,,,,"{""subsubtestname"":""ACE_HReset_H"",""netname"":""ace_hrest"",""state"":""connect""}",,,,,,
,Common:delay,,,,,,"{""subsubtestname"":""DELAY_1000MS_1"",""delay"":""1000"",""record"":""YES""}",,,,,,
,Common:sendCmdAndCreateRecord,,,,,,"{""subsubtestname"": ""GPIO_ACE_TO_SOC_IRQ_L_High"",""pattern"": ""SoC\\s*GPIO\\[\\d*,\\d*\\]\\s*=\\s*(\\d+)"",""isparametric"": ""YES""}",,,socgpio --port 0 --pin 171 --get,,,
,Common:relaySwitch,,,,,,"{""subsubtestname"":""ACE_HReset_L"",""netname"":""ace_hrest"",""state"":""disconnect""}",,,,,,
,Common:delay,,,,,,"{""subsubtestname"":""DELAY_1000MS_2"",""delay"":""1000"",""record"":""YES""}",,,,,,
,Common:delay,,,,,,"{""subsubtestname"":""DELAY_2000MS"",""delay"":""2000"",""record"":""YES""}",,,,,,
,Common:sendCmdAndCreateRecord,,,,,,"{""subsubtestname"": ""ACE_SRDY"",""record"":""YES""}",,,"ace --pick usbc --4cc SRDY --txdata ""0x00"" --rxdata 0",,,
,Common:delay,,,,,,"{""subsubtestname"":""DELAY_1000MS"",""delay"":""1000"",""record"":""YES""}",,,,,,
,Tech:readAndCheckOTP,,,,,,"{""subsubtestname"": ""RECONFIRM_FINAL_CRC"",""pattern"": ""RxData%s*%(4.%).-%:.-0x0000%s*%:%s*(0x%w+%s+0x%w+%s+0x%w+%s+0x%w+)"",""attribute"": ""USBC_OTP_Program_CRC_DFU""}",,,"ace --4cc OTPr --txdata ""0x80"" --rxdata 4",,production_mode==dev_fuse_mode,
,Tech:readAndCheckOTP,,,,,,"{""subsubtestname"": ""RECONFIRM_FINAL_CRC_prod_fuse"",""pattern"": ""RxData%s*%(4.%).-%:.-0x0000%s*%:%s*(0x%w+%s+0x%w+%s+0x%w+%s+0x%w+)"",""attribute"": ""USBC_OTP_Program_CRC_DFU""}",,,"ace --4cc OTPr --txdata ""0x80"" --rxdata 4",,production_mode==prod_fuse_mode,
,Common:sendCmdAndCreateRecord,,,,,,"{""subsubtestname"": ""PD_State_Check"",""record"":""YES""}",,,charge --brickid,,,
,Common:sendCmdAndCreateRecord,,,,,,"{""subsubtestname"": ""State_Default_LA"",""record"":""YES""}",,,"soc --set ""perfstate cpu 4"";soc --set ""perfstate soc 1"";soc --set ""perfstate dcs 1"";soc --set ""perfstate disp 0"";soc -p get-perf-state",,,
,Common:sendCmdAndCreateRecord,,,,5,,"{""subsubtestname"":""I2C2_RT13_TEST"", ""expect"": ""0x18""}",,,"i2c -s 2",,,